//***********************************************************
//! @file
//! @brief		RHI
//! @author		Gajumaru
//***********************************************************
#include <Framework/RHI/RHI.h>
#include <Framework/RHI/GraphicObjectManager.h>

namespace ob::rhi {

    //@―---------------------------------------------------------------------------
    //! @brief  コンストラクタ
    //@―---------------------------------------------------------------------------
    RHI::RHI(GraphicObjectManager& manager) 
        :m_objectManager(manager)
    {
    }


    //@―---------------------------------------------------------------------------
    //! @brief  デストラクタ
    //@―---------------------------------------------------------------------------
    RHI::~RHI() {
    }


    //@―---------------------------------------------------------------------------
    //! @brief  更新
    //@―---------------------------------------------------------------------------
    void RHI::update() {
        m_objectManager.update();
    }


    //@―---------------------------------------------------------------------------
    //! @brief  終了処理
    //@―---------------------------------------------------------------------------
    void RHI::finalize() {
        // 遅延開放するものを全て削除
        for (s32 i = 0; i < m_objectManager.getFrameBufferCount(); ++i) {
            m_objectManager.update();
        }
    }
}