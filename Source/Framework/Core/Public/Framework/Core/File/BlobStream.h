//***********************************************************
//! @file
//! @brief		Blobストリーム
//! @author		Gajumaru
//***********************************************************
#pragma once
#include <Framework/Core/File/Stream.h>
#include <Framework/Core/Misc/Blob.h>

namespace ob::core {

	//@―---------------------------------------------------------------------------
	//! @brief  Blobストリーム
	//@―---------------------------------------------------------------------------
	class BlobStream :public Stream {
	public:

		//@―---------------------------------------------------------------------------
		//! @brief  コンストラクタ
		//@―---------------------------------------------------------------------------
		BlobStream(Blob& blob);

		
		//@―---------------------------------------------------------------------------
		//! @brief  デストラクタ
		//@―---------------------------------------------------------------------------
		~BlobStream();


		//@―---------------------------------------------------------------------------
		//! @brief  読み込み可能か
		//@―---------------------------------------------------------------------------
		bool canRead()const override;


		//@―---------------------------------------------------------------------------
		//! @brief  書き込み可能か
		//@―---------------------------------------------------------------------------
		bool canWrite()const override;


		//@―---------------------------------------------------------------------------
		//! @brief  サイズ取得
		//@―---------------------------------------------------------------------------
		size_t size()const override;


		//@―---------------------------------------------------------------------------
		//! @brief  シーク位置取得
		//@―---------------------------------------------------------------------------
		size_t position()const override;


		//@―---------------------------------------------------------------------------
		//! @brief  読み込み
		//! 
		//! @param buffer 　 読み込みデータ格納先のポインタ
		//! @param byteCount 読み込むバイト数
		//! @return 成功したか
		//@―---------------------------------------------------------------------------
		bool read(void* buffer, size_t byteCount) override;


		//@―---------------------------------------------------------------------------
		//! @brief  書き込み
		//! 
		//! @param buffer 　 書き込むデータ格納先のポインタ
		//! @param byteCount 書き込むバイト数
		//! @return 成功したか
		//@―---------------------------------------------------------------------------
		bool write(const void* buffer, size_t byteCount) override;


		//@―---------------------------------------------------------------------------
		//! @brief  シーク
		//! 
		//! @param offset 　 基準からの移動量
		//! @param origin	 基準位置
		//! @return 成功したか
		//@―---------------------------------------------------------------------------
		bool seek(offset_t offset, SeekOrigin origin) override;


		//@―---------------------------------------------------------------------------
		//! @brief  バッファのフラッシュ
		//! 
		//! @details 書き込み中のデータを即時反映させる。
		//@―---------------------------------------------------------------------------
		void flush() override;


	private:

		Blob&	m_blob;
		size_t	m_position;

	};

}// namespcae ob