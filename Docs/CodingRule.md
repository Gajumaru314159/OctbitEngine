コーディン規約
=================

C++のバージョン
---------------
C++17を最低要件として記述してください。noexcept等をマクロで定義しなおす必要はありませんが、C++20やC++23で導入される機能やコンパイラ固有の機能ついてはマクロを使用してコンパイラごとの機能を選択して使用する必要があります。(例：FORCEINLINE) 
```c++
class Hoge{
public:

  FOREINLINE void Func()noexcept;
  
  // コンパイラ固有の機能を使用することはできません
  // C++17で導入済みの機能はマクロを使用して置き換えません
  // __forceinline__ void Func() NOEXCEPT;
  
}
```
最新の言語バージョンで廃止されている機能や非推奨機能は避けるようにしてください。
```c++
void Func(){
  std::unique_ptr<Hoge> aptr;
  
  // 非推奨機能や削除される機能の使用は避けてください
  // std::auto_ptr<Hoge> aptr;
}
```

ファイルの命名規則
------------------
* ファイル名はクラス名と一致するようにしてください。
* クラスが複数ある場合やクラスがないファイルはクラス名と同じ命名規則でわかりやすい名前を付けてください。
* 拡張子は```.cpp```/```.h```/```.inl```を使用してください。

ヘッダファイル
-------------
* ヘッダファイルは自己完結で単体でコンパイルできなくてはいけません。
* インクルードガードには```#pragma once```を使用してください。
* ヘッダの依存を下げるためにPimplイディオムやインターフェイスによる実装を検討してください。

前方宣言
-------
* 前方宣言をすると不完全な型のエラーを発生しやすくなってしまうため極力使用を控えてください。
* 相互変換が必要な構造体などで前方参照が必要な場合は例外として使用を認めます。

インライン関数
--------------
* 関数の定義が短い場合はインライン関数の使用してください。
  * ループ文やswitch文、再帰関数がある場合はインライン化する必要はありません。
* ヘッダの依存が増える場合は関数ん定義が短い場合でもインライン関数を使用しないでください。
* インライン関数の定義はファイルの下部にまとめて書くか、```.inl```ファイルにまとめて書くようにしてください。
  * ゲッターやセッターのような非常に短い関数はヘッダに定義を記述しても構いません。
* ```.inl```ファイルでは```.h```をインクルードし、インテリセンスが使えるようにしてください。
* ```.inl```ファイルでもインクルードガードを使用してください。

インクルードの順序
------------------
可読性を保つために以下の順序でインクルードし、まとまりごとに辞書順になるように並べてください。
1. 自身の宣言ヘッダ
2. 空行
3. 他ライブラリのヘッダ
4. 空行
5. プロジェクトの他ヘッダ

```c++
#pragma once
#include "Hoge.h"

#include <d3d12.h>

#include <Runtime/Core/Math/Random.h>
#include <Runtime/Platform/Types/Language.h>
#include <Runtime/Platform/Window/Window.h>
```

名前空間
--------
* 名前空間はすべて小文字にし、一単語で記述するようにしてください。
* 名前空間の最後には```// namespace ob```のようにコメントをつけてください。
* 全てのエンジンコードは```namespace ob```内に記述してください。
* モジュールごとに名前空間を分けるようにしてください。
```c++
namespace ob{
  namespace graphic{

    // モジュールのコード

  }// namespace graphic
}// namespace ob
```

構造体
------
* 全てのメンバ変数がpublicの場合のみstructを使用できます。
* 状態をもつ場合は構造体にしてはいけません。
* メンバ変数には接頭辞をつけません。
* デフォルトコンストラクタでは初期化せず、EForceInitを指定した場合に初期化するようにしてください。

クラス
-----
* RAII（Resource Acquisition Is Initialization）を意識し、```startup()```や```shutdown()```などの関数を使用しないでください。
* ```initialize()```は初期化/再初期化の機能として実装してください。遅延初期化のために実装してはいけません。

クラスの構造
------------
クラス宣言は
1. タイプ宣言
2. インナークラス宣言
3. メンバ関数
4. メンバ変数

の順で記述します。  
各項目内では
1. public
2. protected
3. private

の順で記述します。



命名規則Markdown Preview Enhanced 
--------

|種別|命名規則|
|:--|---|
|ファイル名|SampleName.cpp|
|型名|SampleName|
|メンバ関数|SampleName()|
|メンバ変数|m_sampleName|
|構造体変数|sampleName|
|ローカル変数|sampleName|
|static変数|s_sampleName|
|列挙型|Enum::SampleName|
|マクロ|SAMPLE_NAME|

```c++
#define ADD(a,b) (a+b)
enum class Type{
  Open,
  Close
}
struct Point{
  float x;
  float y;
}
class Line{
public:
  Line():m_type(Type::Open){}
  void Set(const Point& start,const Point& end){
    m_start=start;
    m_end=end;
  }
private:
  Type  m_type;
  Point m_start;
  Point m_end;
}
```

コメント
--------
コメントは主に```//```を使用し、```/* */```は広範囲のコードを一時的に無効化するために使用してください。一般的なコメントに```/* */```を使用するとそのコメントを含む範囲で```/* */```が使えなくなるので、長期的に残すコメントは```//```を使うようにしてください。

ドキュメント・コメント
---------------------
* Doxygenでドキュメントを自動生成するために、ヘッダには関数やクラスのドキュメントコメントを書くようにしてください。


