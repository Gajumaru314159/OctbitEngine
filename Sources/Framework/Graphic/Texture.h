//***********************************************************
//! @file
//! @brief		テクスチャ
//! @author		Gajumaru
//***********************************************************
#pragma once
#include <Framework/Graphic/Types/TextureFormat.h>
#include <Framework/Graphic/Types/TextureType.h>
#include <Framework/Graphic/Types/ResourceUsage.h>

//===============================================================
// 前方宣言
//===============================================================
namespace ob::graphic {
    class Device;
    class ISwapChain;
    class ITexture;
}


//===============================================================
// クラス宣言
//===============================================================
namespace ob::graphic {

    //@―---------------------------------------------------------------------------
    //! @brief      スワップチェーン
    //! 
    //! @details    ウィンドウの情報は platform::Window で制御されますが、このクラスでは
    //!             グラフィック機能と結びつけるために必要な情報を制御します。
    //@―---------------------------------------------------------------------------
    class Texture :private Noncopyable {
        friend class Device;
    public:

        //===============================================================
        // コンストラクタ / デストラクタ
        //===============================================================

        //@―---------------------------------------------------------------------------
        //! @brief  コンストラクタ
        //@―---------------------------------------------------------------------------
        Texture();


        //@―---------------------------------------------------------------------------
        //! @brief  コンストラクタ
        //@―---------------------------------------------------------------------------
        Texture(ITexture& texture);


        //@―---------------------------------------------------------------------------
        //! @brief  デストラクタ
        //@―---------------------------------------------------------------------------
        ~Texture();


        //@―---------------------------------------------------------------------------
        //! @brief  明示的開放
        //@―---------------------------------------------------------------------------
        void release();


        //@―---------------------------------------------------------------------------
        //! @brief  空か
        //@―---------------------------------------------------------------------------
        bool isEmpty()const noexcept;


        //===============================================================
        // ゲッター
        //===============================================================

        auto desc()const->const TextureDesc&;

        //@―---------------------------------------------------------------------------
        //! @brief      テクスチャ・サイズを取得
        //@―---------------------------------------------------------------------------
        Size size()const;


        //@―---------------------------------------------------------------------------
        //! @brief      テクスチャ・フォーマットを取得
        //@―---------------------------------------------------------------------------
        auto format()const->TextureFormat;


        //@―---------------------------------------------------------------------------
        //! @brief      テクスチャ使用法を取得
        //@―---------------------------------------------------------------------------
        auto usage()const->ResourceUsage;


        //@―---------------------------------------------------------------------------
        //! @brief      ミップレベルを取得
        //@―---------------------------------------------------------------------------
        s32 mipLevels()const;

        auto type()const->TextureType;




    private:

        ITexture* m_pImpl;

    };

}// namespace pb::graphic