//***********************************************************
//! @file
//! @brief		レンダー・ターゲット
//! @author		Gajumaru
//***********************************************************
#pragma once
#include <Framework/Graphic/Utility/GraphicObjectHolder.h>
#include <Framework/Graphic/Types/RenderTargetDesc.h>
#include <Framework/Graphic/Texture.h>

//===============================================================
// 前方宣言
//===============================================================
namespace ob::graphic {
    class Texture;
}


//===============================================================
// クラス宣言
//===============================================================
namespace ob::graphic {

    //@―---------------------------------------------------------------------------
    //! @brief  レンダー・ターゲット
    //@―---------------------------------------------------------------------------
    class RenderTarget {
        OB_DEFINE_GRAPHIC_OBJECT_HOLDER(RenderTarget);
    public:

        //===============================================================
        // コンストラクタ / デストラクタ
        //===============================================================

        //@―---------------------------------------------------------------------------
        //! @brief  コンストラクタ
        //@―---------------------------------------------------------------------------
        RenderTarget()=default;


        //@―---------------------------------------------------------------------------
        //! @brief  コンストラクタ
        //! 
        //! @param desc     定義
        //! @param name     オブジェクト名
        //@―---------------------------------------------------------------------------
        RenderTarget(const RenderTargetDesc& desc, StringView name=TC("RenderTexture"));


        //@―---------------------------------------------------------------------------
        //! @brief      定義を取得
        //@―---------------------------------------------------------------------------
        const RenderTargetDesc& getDesc()const;


        //@―---------------------------------------------------------------------------
        //! @brief      カラー・テクスチャを取得
        //! 
        //! @param index    マルチレンダーターゲットのインデックス
        //@―---------------------------------------------------------------------------
        Texture getColorTexture(s32 index = 0)const;


        //@―---------------------------------------------------------------------------
        //! @brief      デプス・テクスチャを取得
        //@―---------------------------------------------------------------------------
        Texture getDepthTexture()const;


        //@―---------------------------------------------------------------------------
        //! @brief      描画ターゲット枚数を取得
        //! 
        //! @details    デプス・ステンシルテクスチャは含まれません。
        //@―---------------------------------------------------------------------------
        s32 getColorTextureCount()const;


        //@―---------------------------------------------------------------------------
        //! @brief      デプス・テクスチャを持っているか
        //@―---------------------------------------------------------------------------
        bool hasDepth()const;

    };

}// namespcae ob::graphic