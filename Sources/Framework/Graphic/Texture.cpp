//***********************************************************
//! @file
//! @brief		テクスチャ
//! @author		Gajumaru
//***********************************************************
#include "Texture.h"
#include <Framework/Graphic/Interface/ITexture.h>
#include <Framework/Graphic/System.h>

namespace ob::graphic
{


    //===============================================================
    // コンストラクタ / デストラクタ
    //===============================================================

    //@―---------------------------------------------------------------------------
    //! @brief  コンストラクタ
    //@―---------------------------------------------------------------------------
    Texture::Texture() {

    }


    //@―---------------------------------------------------------------------------
    //! @brief  デストラクタ
    //@―---------------------------------------------------------------------------
    Texture::~Texture() {
        release();
    }


    //@―---------------------------------------------------------------------------
    //! @brief  明示的開放
    //@―---------------------------------------------------------------------------
    void Texture::release() {
        if (m_impl) {
            System::ref().requestRelease(m_impl);
        }
    }


    //@―---------------------------------------------------------------------------
    //! @brief  空か
    //@―---------------------------------------------------------------------------
    bool Texture::isEmpty()const noexcept {
        return m_impl != nullptr;
    }


    //===============================================================
    // ゲッター
    //===============================================================

    //@―---------------------------------------------------------------------------
    //! @brief      テクスチャ・サイズを取得
    //@―---------------------------------------------------------------------------
    Size Texture::size() {
        OB_REQUIRE(m_impl != nullptr);
        return m_impl->size();
    }


    //@―---------------------------------------------------------------------------
    //! @brief      テクスチャ・フォーマットを取得
    //@―---------------------------------------------------------------------------
    auto Texture::format()const->TextureFormat {
        OB_REQUIRE(m_impl != nullptr);
        return m_impl->format();
    }


    //@―---------------------------------------------------------------------------
    //! @brief      テクスチャ使用法を取得
    //@―---------------------------------------------------------------------------
    auto Texture::usage()const->ResourceUsage {
        OB_REQUIRE(m_impl != nullptr);
        return m_impl->usage();
    }


    //@―---------------------------------------------------------------------------
    //! @brief      ミップマップを持っているか
    //@―---------------------------------------------------------------------------
    bool Texture::hasMipmap()const {
        OB_REQUIRE(m_impl != nullptr);
        return m_impl->hasMipmap();
    }

}// namespace ob::graphic