//***********************************************************
//! @file
//! @brief		ミューテックス
//! @author		Gajumaru
//***********************************************************
#pragma once
#include <Framework/Core/Utility/Noncopyable.h>
#include <Framework/Core/Thread/ScopeLock.h>
#include <memory>

namespace ob::core {

    //@―---------------------------------------------------------------------------
    //! @brief  ミューテックス
    //@―---------------------------------------------------------------------------
    class Mutex : Noncopyable{
    public:

        //@―---------------------------------------------------------------------------
        //! @brief  コンストラクタ
        //@―---------------------------------------------------------------------------
        Mutex();


        //@―---------------------------------------------------------------------------
        //! @brief  デストラクタ
        //@―---------------------------------------------------------------------------
        ~Mutex();


        //@―---------------------------------------------------------------------------
        //! @brief  ロックを取得する
        //@―---------------------------------------------------------------------------
        void lock();


        //@―---------------------------------------------------------------------------
        //! @brief  ロックの取得を試みる
        //@―---------------------------------------------------------------------------
        bool try_lock();


        //@―---------------------------------------------------------------------------
        //! @brief  ロックを手放す
        //@―---------------------------------------------------------------------------
        void unlock();

    private:

        std::unique_ptr<class MutexImpl> m_impl;

    };

}// namespcae ob